<%= stylesheet_link_tag 'reservation', media: 'all' %>

<div class="reservation-container">
  <h1 class="reservation-title">Reserve <%= @room.name %></h1>

  <!-- Date Picker (auto-submits on change) -->
  <%= form_with url: reserve_room_path(@room), method: :get, local: true do %>
    <%= hidden_field_tag :room_id, @room.id %>
    <div class="form-group">
      <%= label_tag :date, "Select Date", class: "form-label" %>
      <%= date_field_tag :date, @selected_date, class: "form-input", onchange: "this.form.submit();" %>
    </div>
  <% end %>

  <!-- Reservation Form -->
  <%= form_with model: @reservation, url: reservations_path, local: true do |f| %>
    <%= f.hidden_field :room_id, value: @room.id %>

    <div class="form-group">
      <%= f.label :start_time, "Start Time", class: "form-label" %>
      <%= f.select :start_time, options_for_select(@available_times.map { |time| [time.strftime("%H:%M"), time] }), {}, class: "form-input" %>
    </div>

    <div class="form-group">
      <%= f.label :end_time, "End Time", class: "form-label" %>
      <%= f.select :end_time, options_for_select(@available_times.map { |time| [time.strftime("%H:%M"), time] }), {}, class: "form-input" %>
    </div>

    <%= f.submit "Confirm Reservation", class: "btn-submit" %>
  <% end %>
</div>
